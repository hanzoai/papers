% Hamiltonian Market Maker (HMM) section
\section{Hamiltonian Market Maker (HMM)}
\subsection{Invariant and State}
Let reserve vector \(\bm R = (\Psi, \Theta)\) denote effective supply of compute capacity \(\Psi\) (e.g., GPU-seconds weighted by quality) and an aggregate demand credit pool \(\Theta\). A minimal HMM uses the \textbf{bilinear} Hamiltonian
\begin{equation}\label{eq:cpmm}
\mathcal H(\Psi,\Theta) = \Psi\,\Theta = \kappa, \quad \kappa>0,
\end{equation}
which matches the constant-product AMM as a special case. For multi-asset resources \(\bm \Psi=(\Psi_1,\dots,\Psi_m)\) and credits \(\bm \Theta\), we use
\begin{equation}
\mathcal H(\bm\Psi,\bm\Theta) = \sum_{i=1}^m w_i\,\Psi_i\,\Theta_i + \lambda \sum_{i=1}^m \tfrac{1}{2}(\Psi_i^2+\Theta_i^2), \quad w_i,\lambda>0.
\end{equation}
The quadratic term controls curvature (inventory risk), yielding smoother quotes.

\subsection{Prices, Flows, and Fees}
Define the conjugate price for compute class \(i\):
\begin{equation}
 p_i \equiv \frac{\partial \mathcal H/\partial \Psi_i}{\partial \mathcal H/\partial \Theta_i} = \frac{w_i\,\Theta_i + \lambda\,\Psi_i}{w_i\,\Psi_i + \lambda\,\Theta_i}.
\end{equation}
A swap \(\Delta\bm\Theta<0, \Delta\bm\Psi>0\) (buy compute) preserves \(\mathcal H\) up to fee \(f\). We charge a split fee \(f=f_m+f_r\): market fee \(f_m\) (LP/treasury) and \emph{risk fee} \(f_r\propto \|\Delta\bm\Psi\|\) to compensate inventory risk. In continuous time, inventory evolves via
\begin{equation}
\dot{\Psi}_i = s_i - u_i,\quad \dot{\Theta}_i = d_i - v_i,\quad \text{s.t. } \frac{d}{dt}\mathcal H(\bm\Psi,\bm\Theta)=0 \, (\text{net of fees})
\end{equation}
with supply inflow \(s_i\) (workers) and demand \(d_i\) (jobs). Stability follows from convexity of \(\mathcal H\) in each orthant and fee dissipation.

\subsection{Composable Market Objects}
Each resource class instantiates an HMM pool; cross-resource jobs route via a \emph{path solver} minimizing total cost under \(\mathcal H\)-preserving constraints. Jobs specify an SLA vector (latency, jitter, region), encoded as Lagrange multipliers in the solver; quotes reflect SLA shadow prices.
